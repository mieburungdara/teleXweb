# Smart Collection Rules Table Concept (MySQL)

To implement "Smart Collections" (auto-generated collections based on criteria), a new `smart_collection_rules` table will be introduced. These collections will be virtual, dynamically generated by database queries based on the defined rules.

## Table: `smart_collection_rules`

This table stores the definitions for user-created smart collections.

| Column Name          | Data Type         | Description                                                  | Notes                                      |
|----------------------|-------------------|--------------------------------------------------------------|--------------------------------------------|
| `id`                 | `INT UNSIGNED`    | Primary key for the smart collection rule.                   | Auto-incrementing.                         |
| `user_id`            | `BIGINT UNSIGNED` | The unique ID of the user who owns this rule.                | Foreign key to `users.id`. Indexed.        |
| `rule_name`          | `VARCHAR(255)`    | The name of the smart collection (e.g., "Last 7 days", "High frequency tags"). | NOT NULL. Unique per `user_id`.            |
| `rule_type`          | `VARCHAR(50)`     | The type of rule (e.g., 'last_n_days', 'by_tag_frequency', 'by_mime_type'). | NOT NULL.                                  |
| `rule_parameters_json` | `JSON`          | JSON object containing parameters for the rule (e.g., `{"days": 7}`, `{"min_frequency": 5}`). | NOT NULL.                                  |
| `is_active`          | `BOOLEAN`         | Flag to enable or disable the smart collection.              | NOT NULL, DEFAULT 1.                       |
| `created_at`         | `DATETIME`        | Timestamp when the rule was created.                         | Defaults to `CURRENT_TIMESTAMP`.           |
| `updated_at`         | `DATETIME`        | Timestamp when the rule was last updated.                    | Defaults to `CURRENT_TIMESTAMP` ON UPDATE CURRENT_TIMESTAMP. |

### Relationships

*   `smart_collection_rules.user_id` references `users.id`.
